Timestamp calculatePreparationDateOrNull(IContextAware context, boolean isSOTrx, Timestamp dateOrdered, Timestamp datePromised, int bpartnerLocationId);